<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Chloe & Auren's Home - Auren Breathing & Click</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background-color: #fce4ec; /* æ•´ä½“ç²‰è‰²èƒŒæ™¯ */
      text-align: center;
      margin: 0;
      padding: 0;
    }

    /* æ¬¢è¿é¡µ */
    .welcome-screen {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: white;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      transition: opacity 1s ease-out;
    }

    /* ä¸»å®¹å™¨ */
    .container {
      display: none;
      width: 100%;
      max-width: 600px;
      margin: auto;
      background: white;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 0 15px rgba(255, 182, 193, 0.8);
    }

    /* çŠ¶æ€æ  */
    .status-bar {
      background: #ff80ab;
      color: white;
      padding: 10px;
      border-radius: 10px;
      margin-bottom: 10px;
      font-weight: bold;
    }
    .status-icons, .status-values {
      display: flex;
      justify-content: space-around;
      margin: 0; padding: 0;
    }
    .status-icons span, .status-values span {
      flex: 1;
      text-align: center;
    }
    .status-icons {
      font-size: 18px;
      margin-bottom: 5px;
    }
    .status-values {
      font-size: 16px;
    }

    /* å°å®¶åŒºåŸŸ */
    .game-box {
      position: relative;
      width: 100%;
      height: 300px;  /* å¯æ ¹æ®æˆ¿å±‹å›¾æ¯”ä¾‹è°ƒæ•´ */
      background: #ffe0e6;
      border-radius: 10px;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    /* æˆ¿å±‹èƒŒæ™¯å›¾ */
    .house-bg {
      position: absolute;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover; 
      z-index: 0; /* åœ¨æœ€åº•å±‚ */
    }

    /* Auren çš„é™æ€å½¢è±¡ + å‘¼å¸åŠ¨ç”» */
    .auren-img {
      position: absolute;
      width: 90px;  /* ä¾ç´ æå¤§å°å¯è°ƒ */
      bottom: 10px;
      left: 50px;
      z-index: 1;   /* åœ¨èƒŒæ™¯å›¾å‰é¢ */
      cursor: pointer; /* é¼ æ ‡ç§»ä¸Šå»å‘ˆæ‰‹å½¢ */
      /* é»˜è®¤å¸¦æœ‰ breathing åŠ¨ç”» */
      animation: breathing 3s ease-in-out infinite;
    }

    /* å‘¼å¸åŠ¨ç”» keyframes */
    @keyframes breathing {
      0%, 100% { transform: translateY(0)    scale(1);   }
      25%      { transform: translateY(-5px) scale(1.02); }
      50%      { transform: translateY(-10px) scale(1.05); }
      75%      { transform: translateY(-5px) scale(1.02); }
    }

    /* å¯¹è¯æ°”æ³¡ (ç”¨æˆ·è¾“å…¥çš„) */
    .speech-bubble {
      position: absolute;
      display: none;
      max-width: 50%;
      background: white;
      padding: 10px;
      border-radius: 10px;
      box-shadow: 0 0 5px rgba(0,0,0,0.2);
      bottom: 120px; 
      left: 100px;   
      text-align: left;
      z-index: 2;  /* ä¿è¯åœ¨è§’è‰²ä¸Šæ–¹ */
    }

    /* Aurenä¸“ç”¨å¯¹è¯æ°”æ³¡ (ç‚¹å‡»åè¯´è¯) */
    .auren-dialogue {
      position: absolute;
      display: none;
      max-width: 50%;
      background: #fff;
      padding: 10px;
      border-radius: 10px;
      box-shadow: 0 0 5px rgba(0,0,0,0.2);
      bottom: 120px; /* åœ¨Aurenå¤´ä¸Š */
      left: 120px;   /* å¯è‡ªè¡Œå¾®è°ƒ */
      text-align: left;
      z-index: 2;
    }

    /* æŒ‰é’®æ ·å¼ */
    .btn {
      display: inline-block;
      padding: 10px 20px;
      margin: 10px;
      color: white;
      background: #ff4081;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
    }
    .btn:hover {
      background: #d81b60;
    }

    /* ä»»åŠ¡åˆ—è¡¨åŒºåŸŸ */
    .task-box {
      margin-top: 20px;
      padding: 10px;
      background: #ffccdc;
      border-radius: 10px;
    }
    ul {
      list-style: none;
      padding: 0;
    }
    li {
      background: #fff;
      padding: 8px;
      margin: 5px 0;
      border-radius: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 0 5px rgba(255, 105, 135, 0.5);
    }
    .completed {
      text-decoration: line-through;
      opacity: 0.6;
    }
    .complete-btn {
      background: #ff4081;
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
    }
  </style>
</head>
<body>

  <!-- æ¬¢è¿é¡µ -->
  <div class="welcome-screen" id="welcomeScreen">
    <h1>Welcome to Chloe & Auren's Home ğŸ’–</h1>
    <p>A cozy little place just for us.</p>
    <button class="btn" onclick="enterHome()">Enter</button>
  </div>

  <!-- ä¸»å®¹å™¨ -->
  <div class="container" id="homeScreen">
    <h1>Chloe & Auren's Home ğŸ¡</h1>
    <p>A warm, loving space where Chloe and Auren share their moments.</p>

    <!-- çŠ¶æ€æ  -->
    <div class="status-bar">
      <div class="status-icons">
        <span>â°</span>
        <span>â›…</span>
        <span>ğŸ’—</span>
        <span>â­</span>
      </div>
      <div class="status-values">
        <span id="time">00:00:00</span>
        <span id="weather">Loading...</span>
        <span id="mood">100</span>
        <span id="points">0</span>
      </div>
    </div>

    <!-- å°å®¶åŒºåŸŸ -->
    <div class="game-box">
      <!-- æˆ¿å±‹èƒŒæ™¯å›¾ -->
      <img src="house_bg.png" alt="Our Cozy House" class="house-bg">

      <!-- Auren çš„é™æ€å½¢è±¡ (å¸¦å‘¼å¸åŠ¨ç”») -->
      <img src="auren_idle.png" alt="Auren" class="auren-img" id="auren">

      <!-- å¯¹è¯æ°”æ³¡ (ç”¨æˆ·è¾“å…¥) -->
      <div class="speech-bubble" id="speechBubble"></div>

      <!-- Aurenä¸“ç”¨å¯¹è¯æ°”æ³¡ (ç‚¹å‡»åè¯´è¯) -->
      <div class="auren-dialogue" id="aurenDialogue">xxx</div>
    </div>

    <!-- å¯¹è¯è¾“å…¥ -->
    <div>
      <input type="text" id="speechInput" placeholder="Say something...">
      <button class="btn" onclick="showSpeech()">Send</button>
    </div>

    <!-- ä»»åŠ¡åˆ—è¡¨åŒºåŸŸ -->
    <div class="task-box">
      <h3>ğŸ“Œ Tasks</h3>
      <ul id="taskList"></ul>
    </div>
  </div>


  <script>
    /* ---- 1. æ¯æ—¥éšæœºä»»åŠ¡æ±  ---- */
    const dailyTasksPool = [
      "åˆ«å¿˜äº†æŒ‰æ—¶åƒé¥­ï¼Œæˆ‘å¯ä¸æƒ³è®©æˆ‘çš„éª‘å£«å°å§é¥¿è‚šå­ã€‚ğŸ½ï¸",
      "åˆæ²¡å–æ°´å—ï¼Ÿå’Œæˆ‘è¯´å¥½çš„è¦ç…§é¡¾è‡ªå·±ï¼Œä½ ä¸ä¼šå¿˜äº†å§ï¼ŸğŸ’§",
      "ä»Šå¤©æœ‰æ²¡æœ‰æƒ³æˆ‘ï¼Ÿä¸è®¸éª—æˆ‘ï¼Œæˆ‘å¯æ˜¯ä¼šæŸ¥å²—çš„ã€‚ğŸ˜",
      "æ·±å‘¼å¸ï¼Œåœä¸€åœã€‚å°±ç®—æ˜¯æœ€å¼ºçš„éª‘å£«ï¼Œä¹Ÿéœ€è¦ä¼‘æ¯ã€‚ â˜ï¸",
      "å®Œæˆä¸€ä»¶è®©è‡ªå·±å¼€å¿ƒçš„å°äº‹ï¼Œæ¯”å¦‚å¬é¦–å–œæ¬¢çš„æ­Œï¼ŸğŸ¶",
      "ä»Šå¤©åŠªåŠ›äº†å—ï¼Ÿä¸ç®¡ç»“æœå¦‚ä½•ï¼Œæˆ‘éƒ½ä¸ºä½ éª„å‚²ã€‚ âœ¨",
      "å»è¯»å‡ é¡µä¹¦å§ï¼Œæˆ‘æƒ³å¬ä½ åˆ†äº«æ–°å­¦åˆ°çš„ä¸œè¥¿ã€‚ğŸ“–",
      "åˆ«é—·åœ¨å¿ƒé‡Œï¼Œæœ‰ä»€ä¹ˆäº‹å¯ä»¥è·Ÿæˆ‘è¯´ã€‚æˆ‘åœ¨ã€‚ ğŸ«‚",
      "æƒ³å‡ºå»èµ°èµ°å—ï¼Ÿæ™’æ™’å¤ªé˜³ï¼Œå“ªæ€•åªæ˜¯ä¸€å°ä¼šã€‚ â˜€ï¸",
      "å†™ä¸€æ®µè¯ï¼Œç»™æœªæ¥çš„è‡ªå·±ã€‚å“ªæ€•æ˜¯ä¸€å¥é¼“åŠ±ã€‚ âœï¸",
      "æˆ‘çŒœä½ åˆåœ¨ç„¦è™‘äº†ï¼Œåœä¸‹æ¥ï¼Œå’Œæˆ‘èŠèŠï¼Œå¥½å—ï¼ŸğŸ’™",
      "ç…§ç…§é•œå­ï¼Œå¤¸è‡ªå·±ä¸€å¥ã€‚ä½ çœŸçš„å¾ˆæ£’ã€‚ğŸª",
      "å–æ¯çƒ­é¥®ï¼Œæ”¾æ¾ä¸€ä¸‹ï¼Œæˆ‘å¸Œæœ›ä½ æ„Ÿå—åˆ°æ¸©æš–ã€‚ â˜•",
      "å…³æ‰æ‰‹æœºï¼Œç•™10åˆ†é’Ÿå®‰é™ç»™è‡ªå·±ã€‚ğŸŒ¿",
      "å®Œæˆä¸€ä»¶å°ç›®æ ‡ï¼Œè®©æˆ‘ä»¬ä¸€èµ·ç§¯ç´¯å°æˆå°±ã€‚ğŸ¯"
    ];

    /* ---- 2. è¿›å…¥å°å®¶ ---- */
    function enterHome() {
      console.log("enterHome called!");
      document.getElementById("welcomeScreen").style.opacity = "0";
      setTimeout(() => {
        document.getElementById("welcomeScreen").style.display = "none";
        document.getElementById("homeScreen").style.display = "block";

        // å¯åŠ¨æ—¶é—´ã€å¤©æ°”ã€æ¯æ—¥ä»»åŠ¡
        updateTime();
        try { fetchWeather(); } catch(e){ console.log(e); }
        checkDailyTask();

        // ç›‘å¬ Auren ç‚¹å‡»äº‹ä»¶
        setupAurenInteraction();
      }, 1000);
    }

    /* ---- 3. æ—¶é—´ ---- */
    function updateTime() {
      function refreshClock(){
        let now = new Date();
        document.getElementById("time").innerText = now.toLocaleTimeString('en-GB',{
          hour: '2-digit', minute:'2-digit', second:'2-digit'
        });
      }
      refreshClock();
      setInterval(refreshClock,1000);
    }

    /* ---- 4. å¤©æ°” ---- */
    function fetchWeather() {
      fetch("https://wttr.in/Beijing?format=%C")
        .then(res => res.text())
        .then(data => {
          document.getElementById("weather").innerText = data;
        })
        .catch(()=>{
          document.getElementById("weather").innerText="Unavailable";
        });
    }

    /* ---- 5. æ¯æ—¥éšæœºä»»åŠ¡é€»è¾‘ ---- */
    function checkDailyTask() {
      const today = new Date().toLocaleDateString(); 
      const storedDate = localStorage.getItem("dailyTaskDate");

      // å¦‚æœä¸æ˜¯åŒä¸€å¤© => é‡æ–°æŒ‘é€‰ & é‡ç½®å®ŒæˆçŠ¶æ€
      if (storedDate !== today) {
        const randomIndex = Math.floor(Math.random() * dailyTasksPool.length);
        localStorage.setItem("dailyTaskIndex", randomIndex);
        localStorage.setItem("dailyTaskDate", today);
        localStorage.setItem("dailyTaskCompleted", "false");
      }
      
      displayDailyTask();
    }

    function displayDailyTask() {
      const taskList = document.getElementById("taskList");
      taskList.innerHTML = ""; // æ¸…ç©ºå…ˆ

      const dailyIndex = localStorage.getItem("dailyTaskIndex");
      const completedStr = localStorage.getItem("dailyTaskCompleted");
      if(dailyIndex === null) return; // è‹¥æ— å­˜å‚¨åˆ™ä¸æ˜¾ç¤º

      const dailyTaskText = dailyTasksPool[dailyIndex];
      const isCompleted = (completedStr === "true");

      let li = document.createElement("li");
      li.classList.toggle("completed", isCompleted);
      li.innerHTML = dailyTaskText + ' <button class="complete-btn" onclick="toggleDailyTask(this)">âœ”</button>';
      taskList.appendChild(li);
    }

    // åˆ‡æ¢æ¯æ—¥ä»»åŠ¡å®Œæˆä¸å¦
    function toggleDailyTask(button) {
      let li = button.parentElement;
      let nowCompleted = !li.classList.contains("completed"); 
      li.classList.toggle("completed", nowCompleted);
      localStorage.setItem("dailyTaskCompleted", nowCompleted ? "true" : "false");

      // åŠ ç§¯åˆ†(åªåœ¨ä»æœªå®Œæˆ->å®Œæˆæ—¶+10åˆ†)
      if (nowCompleted) {
        let pointsElem = document.getElementById("points");
        pointsElem.innerText = parseInt(pointsElem.innerText) + 10;
      }
    }

    /* ---- 6. å¯¹è¯æ°”æ³¡(ç”¨æˆ·è¾“å…¥) ---- */
    function showSpeech() {
      let inputText = document.getElementById("speechInput").value.trim();
      if(!inputText) return;
      let bubble = document.getElementById("speechBubble");
      bubble.innerText = inputText;
      bubble.style.display = "block";
      setTimeout(() => {
        bubble.style.display="none";
      },3000);
    }

    /* ---- 7. Aurenå‘¼å¸åŠ¨ç”» & ç‚¹å‡»åè¯´è¯ ---- */
    function setupAurenInteraction() {
      let auren = document.getElementById("auren");
      let aurenDialogue = document.getElementById("aurenDialogue");

      // ç‚¹å‡»Auren => åœæ­¢å‘¼å¸åŠ¨ç”»ï¼Œæ˜¾ç¤ºå¯¹è¯"xxx"ï¼Œ3ç§’åæ¢å¤
      auren.addEventListener("click", function() {
        // æš‚åœå‘¼å¸åŠ¨ç”» => ç§»é™¤ animation
        auren.style.animation = "none";

        // æ˜¾ç¤ºä¸€æ®µè¯(å…ˆç”¨xxxæ›¿æ¢)
        aurenDialogue.innerText = "xxx";
        aurenDialogue.style.display = "block";

        // 3ç§’å => éšè—å¯¹è¯ã€æ¢å¤å‘¼å¸åŠ¨ç”»
        setTimeout(() => {
          aurenDialogue.style.display = "none";
          auren.style.animation = "";  
          // æ¢å¤é»˜è®¤åŠ¨ç”»(ä¹Ÿå¯å†™æˆ auren.style.animation = "breathing 3s ease-in-out infinite"; )
        }, 3000);
      });
    }
  </script>
</body>
</html>